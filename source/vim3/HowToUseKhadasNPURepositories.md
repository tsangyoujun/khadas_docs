title: How To Use Pre-Built NPU Demo
---

## Pre-Build NPU demo Repository

`aml_npu_demo_binaries repository` are executable files repositories, this repository are used to run NPU demo on **khadas VIM3/VIM3L**

### Repository information

* Repository address: [gitlab.com/khadas/aml_npu_demo_binaries](https://gitlab.com/khadas/aml_npu_demo_binaries)

* Repository structure

    1. detect_demo/detect_demo_khadas : These two demos are demos that use cameras to recognize objects for classification
    2. detect_demo_picture : This demo is to identify and classify multi-object pictures
    3. inceptionv3 : This demo is a demo that recognizes pictures and makes top5 predictions


### How To Use

#### preparation

1. **Please run ubuntu firmware on VIM3 and upgrade the system through `sudo apt update && sudo apt upgrade`**

2. `detect_demo_picture`/`detect_demo`/`detect_demo_khadas` need to be used in `framebuffer` mode, use `Ctrl`+`Alt`+`F1` to switch to `framebuffer` mode

3. Clone the repository to VIM3/VIM3L

```shell
$ cd ${workspace}
$ git clone https://gitlab.com/khadas/aml_npu_demo_binaries
```

#### Use `detect_demo` or `detect_demo_khadas` or `detect_demo_picture`

Install demo:

```shell
$ cd ${workspace}/aml_npu_demo_binaries
$ sudo ./INSTALL
```
After installation, the instructions to install the README file can run the demo.

`detect_demo_uvc` is the running file of the USB camera
`detect_demo_mipi`是mipi摄像头的运行文件

uninstall demo:

```shell
$ sudo ./UNINSTALL
```

#### Use inceptionv3

If you board is VIM3

```shell
$ cd ${workspace}/aml_npu_demo_binaries/inceptionv3/vim3
```

If you board is VIM3L

```shell
$ cd ${workspace}/aml_npu_demo_binaries/inceptionv3/vim3l
```

run demo

```shell
$ ./inceptionv3 inception_v3.nb /path/to/picture
```

**Image format needs to use jpg format**

## aml_npu_app Repository

aml_npu_app repository is used to compile demo repository, **this repository runs on PC**

### Repository information

* Repository address: [gitlab.com/khadas/aml_npu_app](https://gitlab.com/khadas/aml_npu_app) 

* Repository structure

    1. `DDK_6.3.2`/`DDK_6.3.2.3`/`DDK_6.3.2.5`/`DDK_6.3.3.4` is the source code of different versions of library files
    2. `detect_library/model_code` point to the latest version of the library source code
    3. `detect_library/source_code` generate detect.so
    4. `detect_library/yolo_demo_gst_uvc` or `detect_library/yolo_demo_mipi` generate USB demo or MIPI demo
    5. `detect_library/sample_demo` Generate a demo that recognizes the picture.


### How To Use

#### Preparation

1. [Apply sdk](https://www.khadas.com/npu-toolkit-vim3),and unzip.

2. clone repository to you PC

```shell
$ cd ${workspace}
$ git clone https://gitlab.com/khadas/aml_npu_app
```

#### Compile

Enter the location where you need to compile, here takes `yolov3` as an example.

```shell
$ cd ${workspace}
$ cd aml_npu_app/detect_library/model_code/detect_yolo_v3
$ ./build_vx.sh /path/to/sdk/linux_sdk/linux_sdk
```

After compilation, the files in the `bin_r` directory are the files generated by the compilation

```shell
$ ls bin_r/
libnn_yolo_v3.so  vnn_yolov3.o  yolo_v3.o  yolov3_process.o
```

